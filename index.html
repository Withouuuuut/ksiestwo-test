<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Księstwo Sushi — Menu</title>
  <style>
    :root{
      --bg-gradient: linear-gradient(135deg, #f8f6f4 0%, #fff8f4 50%, #f0ece9 100%);
      --card: rgba(255, 255, 255, 0.85);
      --muted: #7b7b7b;
      --accent: #d88b6a;
      --text: #111;
      --dark-btn: #222; 
      --maxw: 1000px;
      --radius: 24px;
      --shadow: 0 20px 60px -15px rgba(0,0,0,0.08);
      --ease: cubic-bezier(0.25, 1, 0.5, 1);
    }
    *{box-sizing:border-box}
    
    body {
      margin: 0;
      font-family: "Georgia", "Times New Roman", serif;
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      padding: 24px;
      padding-top: 120px; /* Space for Dynamic Island */
      display: flex;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(-45deg, #f8f6f4, #fff0e6, #f0ece9, #fff);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* --- DYNAMIC ISLAND NAV --- */
    .dynamic-island-container {
      position: fixed;
      top: 20px;
      left: 0; 
      right: 0;
      display: flex;
      justify-content: center;
      z-index: 1000;
      pointer-events: none; /* Let clicks pass through outside the island */
    }

    .dynamic-island {
      pointer-events: auto;
      background: rgba(20, 20, 20, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 6px;
      border-radius: 50px;
      box-shadow: 0 10px 40px -10px rgba(0,0,0,0.3);
      display: flex;
      gap: 8px;
      align-items: center;
      max-width: 90%;
      width: auto;
      border: 1px solid rgba(255,255,255,0.1);
      transition: transform 0.3s var(--ease);
    }
    .dynamic-island:hover {
      transform: scale(1.02);
    }

    .nav-scroller {
      display: flex;
      gap: 4px;
      overflow-x: auto;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE/Edge */
      padding: 0 4px;
      max-width: 600px;
    }
    .nav-scroller::-webkit-scrollbar { display: none; }

    .nav-pill {
      background: transparent;
      border: none;
      color: #aaa;
      padding: 8px 16px;
      border-radius: 100px;
      font-size: 13px;
      font-weight: 700;
      white-space: nowrap;
      cursor: pointer;
      font-family: sans-serif;
      transition: all 0.3s var(--ease);
    }
    .nav-pill:hover {
      color: #fff;
      background: rgba(255,255,255,0.1);
    }
    .nav-pill.active {
      background: #fff;
      color: #000;
      box-shadow: 0 4px 12px rgba(255,255,255,0.2);
    }

    .island-divider {
      width: 1px;
      height: 24px;
      background: rgba(255,255,255,0.2);
      flex-shrink: 0;
    }

    .lang-switch {
      display: flex;
      background: rgba(255,255,255,0.1);
      border-radius: 100px;
      padding: 3px;
      flex-shrink: 0;
    }
    .lang-opt {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: transparent;
      color: #aaa;
      font-weight: 700;
      font-size: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s var(--ease);
    }
    .lang-opt.active {
      background: var(--accent);
      color: #fff;
    }

    /* --- MAIN WRAPPER --- */
    .wrap {
      width: 100%;
      max-width: var(--maxw);
      background: var(--card);
      border-radius: 32px;
      padding: 40px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.4);
      
      opacity: 0;
      animation: fadeIn 1s var(--ease) forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* --- HEADER --- */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 40px;
      padding-left: 10px;
    }
    .brand {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    .logo {
      width: 70px;
      height: 70px;
      border-radius: 18px;
      background: linear-gradient(135deg, var(--accent), #f3c9b3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #fff;
      font-size: 24px;
      box-shadow: 0 10px 25px -5px rgba(216, 139, 106, 0.5);
      transition: transform 0.5s var(--ease);
    }
    .brand:hover .logo {
        transform: rotate(5deg) scale(1.05);
    }
    h1 { margin: 0; font-size: 28px; letter-spacing: -0.5px; }
    .sub { color: var(--muted); font-size: 15px; font-style: italic; margin-top: 4px; }

    /* --- LAYOUT --- */
    .content {
      display: flex;
      gap: 50px;
      align-items: flex-start;
    }
    .left {
      flex: 1;
      min-width: 0;
      transition: opacity 0.3s var(--ease);
    }
    .right {
      width: 300px;
      flex-shrink: 0;
      position: sticky;
      top: 100px;
    }

    @media (max-width: 900px) {
      .content { flex-direction: column-reverse; gap: 30px; }
      .right { width: 100%; position: static; }
      .wrap { padding: 20px; border-radius: 24px; }
      body { padding: 10px; padding-top: 100px; }
    }

    /* --- MENU SECTIONS --- */
    .menu-block {
        background: rgba(255,255,255,0.6);
        border-radius: 24px;
        margin-bottom: 30px;
        box-shadow: 0 4px 30px rgba(0,0,0,0.02);
        border: 1px solid rgba(255,255,255,0.6);
        overflow: hidden;
        
        /* Scroll Reveal State */
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s var(--ease), transform 0.8s var(--ease);
    }
    .menu-block.revealed {
        opacity: 1;
        transform: translateY(0);
    }

    .block-header { padding: 24px; }
    .block-header h2 {
        margin: 0 0 10px 0;
        font-size: 24px;
        color: var(--text);
        position: relative;
        display: inline-block;
    }
    .block-header h2::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 40px;
        height: 3px;
        background: rgba(216, 139, 106, 0.3);
        border-radius: 10px;
    }

    /* --- IMAGES --- */
    .intro-media { width: 100%; padding: 0 12px 12px 12px; }
    
    .single-img {
        width: 100%;
        height: 260px;
        object-fit: cover;
        border-radius: 18px;
        cursor: pointer;
        transition: transform 0.6s var(--ease), filter 0.3s;
        box-shadow: 0 10px 30px -10px rgba(0,0,0,0.1);
    }
    .single-img:hover { transform: scale(1.02); }

    .stack-grid {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
    .stack-img {
        width: 100%;
        height: 180px; 
        object-fit: cover;
        border-radius: 18px;
        cursor: pointer;
        transition: transform 0.5s var(--ease), box-shadow 0.5s var(--ease);
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    .stack-img:hover { 
        transform: scale(1.02) translateY(-5px); 
        box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        z-index: 2;
    }

    .intro-text {
        padding: 0 24px 10px 24px;
        color: #555;
        font-size: 16px;
        line-height: 1.6;
    }
    .note {
        font-size: 14px;
        color: #666;
        padding: 16px 24px;
        margin: 0 12px 12px 12px;
        background: rgba(216, 139, 106, 0.08);
        border-radius: 12px;
        border: 1px dashed rgba(216, 139, 106, 0.2);
        display: flex;
        gap: 10px;
        align-items: flex-start;
    }
    .note::before { content: 'ℹ'; color: var(--accent); font-weight: bold; }

    /* --- ACCORDION --- */
    .accordion-trigger {
        width: 100%;
        padding: 16px 24px;
        background: linear-gradient(to right, #ffffff, #fafafa);
        border: none;
        border-top: 1px solid rgba(0,0,0,0.03);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background 0.3s;
    }
    .accordion-trigger:hover { background: #f4f4f4; }
    
    .trigger-text {
        font-weight: 700;
        color: var(--accent);
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 1.5px;
    }
    .trigger-icon {
        width: 28px; height: 28px;
        border-radius: 50%;
        background: #fff;
        display: flex; align-items: center; justify-content: center;
        font-size: 10px;
        color: var(--muted);
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        transition: transform 0.5s var(--ease), background 0.3s;
    }
    .accordion-wrapper.active .trigger-icon { 
        transform: rotate(180deg); 
        background: var(--accent); 
        color: #fff;
    }

    .accordion-content {
        display: grid;
        grid-template-rows: 0fr;
        transition: grid-template-rows 0.8s var(--ease), opacity 0.5s;
        opacity: 0.5;
    }
    .accordion-wrapper.active .accordion-content {
        grid-template-rows: 1fr;
        opacity: 1;
    }
    .min-h-0 { overflow: hidden; }
    .items-list { 
        padding: 24px; 
        background: rgba(255,255,255,0.4); 
    }

    /* --- MENU ITEMS --- */
    .item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 16px;
        padding: 16px;
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.02);
        transition: transform 0.3s var(--ease), box-shadow 0.3s var(--ease);
        border: 1px solid transparent;
        
        /* Stagger animation setup */
        opacity: 0;
        transform: translateX(-10px);
    }
    /* When accordion is open, items animate in */
    .accordion-wrapper.active .item {
        opacity: 1;
        transform: translateX(0);
    }
    
    .item:hover {
        transform: scale(1.02);
        box-shadow: 0 8px 20px rgba(0,0,0,0.06);
        border-color: rgba(216, 139, 106, 0.2);
    }

    .item-info { flex: 1; padding-right: 20px; }
    .item-name { font-weight: 700; font-size: 17px; margin-bottom: 6px; color: #222; }
    .item-desc { 
        font-size: 14px; color: #666; line-height: 1.5; white-space: pre-line;
    }
    .item-price { 
        font-weight: 800; color: var(--accent); font-size: 17px; white-space: nowrap;
        background: rgba(216, 139, 106, 0.1);
        padding: 6px 12px;
        border-radius: 8px;
        height: fit-content;
    }

    /* --- URAMAKI GRID --- */
    .cols-2 {
        display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
    }
    .col-title {
        font-size: 14px; font-weight: 800; color: #aaa;
        text-transform: uppercase; letter-spacing: 1px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px; margin-bottom: 20px;
        display: flex; align-items: center; gap: 8px;
    }
    .col-title::before {
        content:''; display:block; width:8px; height:8px; background:var(--accent); border-radius:50%;
    }
    @media (max-width:700px) { .cols-2 { grid-template-columns: 1fr; gap: 20px; } }

    /* --- FLOATING ALLERGY BTN --- */
    .allergy-btn {
        position: fixed;
        bottom: 40px; 
        right: 40px;
        width: 60px; height: 60px;
        background: rgba(255,255,255,0.9);
        backdrop-filter: blur(10px);
        color: var(--accent);
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 28px; font-weight: 800; font-family: sans-serif;
        box-shadow: 0 10px 30px rgba(216, 139, 106, 0.3);
        cursor: pointer;
        z-index: 100;
        border: 2px solid rgba(216, 139, 106, 0.2);
        transition: transform 0.3s var(--ease);
        animation: float 6s ease-in-out infinite;
    }
    .allergy-btn:hover { transform: scale(1.1) rotate(10deg); border-color: var(--accent); }
    
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    /* --- INFO MODAL --- */
    .info-modal {
        position: fixed; inset: 0; z-index: 2000;
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(15px);
        display: flex; justify-content: center; align-items: center;
        opacity: 0; pointer-events: none;
        transition: opacity 0.4s var(--ease);
        padding: 20px;
    }
    .info-modal.open { opacity: 1; pointer-events: auto; }
    
    .info-card {
        background: #fff;
        width: 100%; max-width: 450px;
        padding: 40px;
        border-radius: 32px;
        box-shadow: 0 25px 80px rgba(0,0,0,0.4);
        transform: scale(0.9) translateY(20px); opacity: 0;
        transition: all 0.5s var(--ease);
        position: relative;
        text-align: center;
    }
    .info-modal.open .info-card { transform: scale(1) translateY(0); opacity: 1; }
    
    .info-close {
        position: absolute; top: 20px; right: 25px;
        width: 36px; height: 36px; background: #f0f0f0; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 20px; color: #555; cursor: pointer;
        transition: 0.2s;
    }
    .info-close:hover { background: #e0e0e0; }
    
    .info-icon { font-size: 50px; margin-bottom: 20px; display: block; animation: bounce 2s infinite; }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

    .info-title { font-size: 22px; font-weight: 700; margin-bottom: 16px; color: var(--text); }
    .info-text { font-size: 15px; line-height: 1.6; color: #666; margin-bottom: 24px; background: #fafafa; padding: 20px; border-radius: 16px; }
    .info-note { font-size: 13px; font-weight: 600; color: var(--accent); background: rgba(216,139,106,0.1); padding: 12px; border-radius: 12px; }

    /* --- SIDEBAR & FOOTER --- */
    .contact-card {
        background: rgba(255,255,255,0.8);
        padding: 30px;
        border-radius: 24px;
        box-shadow: 0 10px 40px -5px rgba(0,0,0,0.05);
        border: 1px solid rgba(255,255,255,0.5);
    }
    .contact-card h3 { margin: 0 0 24px 0; font-size: 20px; border-left: 4px solid var(--accent); padding-left: 12px; }
    
    .c-btn {
        display: flex;
        align-items: center;
        gap: 16px;
        background: #222;
        color: #fff;
        text-decoration: none;
        padding: 16px 24px;
        border-radius: 16px;
        margin-bottom: 12px;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s var(--ease);
        position: relative;
        overflow: hidden;
    }
    .c-btn img { width: 22px; height: 22px; filter: invert(1); z-index: 1; }
    .c-btn span { z-index: 1; }
    .c-btn::before {
        content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(45deg, #333, #111);
        z-index: 0; transition: 0.3s;
    }
    .c-btn:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    footer {
        margin-top: 60px;
        padding-top: 30px;
        border-top: 1px solid rgba(0,0,0,0.05);
        display: flex;
        justify-content: space-between;
        color: var(--muted);
        font-size: 13px;
        opacity: 0.7;
    }

    /* --- LIGHTBOX --- */
    .lightbox {
        position: fixed; inset: 0; z-index: 2100;
        background: rgba(0,0,0,0.95);
        display: flex; justify-content: center; align-items: center;
        opacity: 0; pointer-events: none;
        transition: opacity 0.3s var(--ease);
        backdrop-filter: blur(10px);
    }
    .lightbox.open { opacity: 1; pointer-events: auto; }
    .lb-img {
        max-width: 90%; max-height: 90vh;
        border-radius: 16px;
        transform: scale(0.9);
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: 0 0 60px rgba(0,0,0,0.6);
    }
    .lightbox.open .lb-img { transform: scale(1); }
    .lb-close {
        position: absolute; top: 30px; right: 40px;
        color: #fff; font-size: 40px; cursor: pointer;
        opacity: 0.6; transition: 0.2s;
        width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
        background: rgba(255,255,255,0.1); border-radius: 50%;
    }
    .lb-close:hover { opacity: 1; background: rgba(255,255,255,0.2); transform: rotate(90deg); }

  </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body>

  <!-- DYNAMIC ISLAND NAVIGATION -->
  <div class="dynamic-island-container">
    <div class="dynamic-island">
      <div class="nav-scroller" id="nav-scroller">
        <!-- Links injected by JS -->
      </div>
      <div class="island-divider"></div>
      <div class="lang-switch">
        <button class="lang-opt active" onclick="setLang('pl')">PL</button>
        <button class="lang-opt" onclick="setLang('en')">EN</button>
      </div>
    </div>
  </div>
  
  <!-- Floating Allergy Button -->
  <div class="allergy-btn" onclick="openInfo()">!</div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">KS</div>
        <div>
          <h1>Księstwo Sushi</h1>
          <div class="sub" id="sub">Fine sushi — Menu</div>
        </div>
      </div>
    </header>

    <div class="content">
      <div class="left" id="menu-container">
        <!-- Menu Items Render Here -->
      </div>

      <div class="right">
        <div class="contact-card">
          <h3 id="lbl-contacts">Kontakt</h3>
          <div id="contacts-list"></div>
        </div>
      </div>
    </div>

    <footer>
      <span>Księstwo Sushi 2024</span>
      <span id="lbl-web">Menu — online version</span>
    </footer>
  </div>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lb" onclick="closeLb()">
    <span class="lb-close">&times;</span>
    <img src="" class="lb-img" id="lb-img">
  </div>
  
  <!-- INFO MODAL -->
  <div class="info-modal" id="info-modal" onclick="closeInfo(event)">
    <div class="info-card">
      <span class="info-close" onclick="closeInfo(event)">&times;</span>
      <div class="info-icon">⚠️</div>
      <div class="info-title" id="info-title"></div>
      <div class="info-text" id="info-text"></div>
      <div class="info-note" id="info-note"></div>
    </div>
  </div>

  <script>
    // --- DATA ---
    const ALLERGIES = {
        title: { en: 'Allergy Information', pl: 'Informacja o alergenach' },
        text: {
            en: 'According to the recipe, they may contain: gluten, cucumber, oshinko, kampyo, avocado, mango, melon, lettuce, sesame seeds, Philadelphia cream cheese, mayonnaise, sauces, edible gold.',
            pl: 'Zgodnie z recepturą mogą zawierać: gluten, ogórek, oshinko, kampyo, awokado, mango, melon, sałatę, sezam, serek philadelphia, majonez, sosy, złoto jadalne.'
        },
        service: {
            en: 'We kindly inform you that we add a waiter service of 10% to the final bill.',
            pl: 'Uprzejmie informujemy, że doliczamy serwis kelnerski w wysokości 10% do rachunku końcowego.'
        }
    };

    const DATA = [
      {
        id:'sets',
        title:{en:'Sushi Sets', pl:'Zestawy Sushi'},
        img: 'images/zestawy.jpg', 
        desc:{en:'Curated combinations of our finest rolls, perfect for experiencing a variety of flavors.', pl:'Starannie dobrane kompozycje naszych najlepszych rolek, idealne do poznania różnorodności smaków.'},
        items:[
          { 
            en:'OTO 16 pcs.', pl:'OTO 16 szt.', price:'90 zł',
            descEN:'4x Gold California (surimi wrapped in salmon)\n4x Avocado Kani (surimi wrapped in avocado)\n4x Ohio Irygoma (butterfish in black sesame)\n4x Ebi Ten (shrimp tempura)',
            descPL:'4x Gold California (surimi owijane łososiem)\n4x Awokado Kani (surimi owijane awokado)\n4x Ohio Irygoma (ryba maślana obtoczona w czarnym sezamie)\n4x Ebi Ten (krewetka w tempurze)'
          },
          { 
            en:'AKA 22 pcs.', pl:'AKA 22 szt.', price:'130 zł',
            descEN:'4x Rainbow (surimi wrapped in variety of fish)\n4x Mango Sake (salmon wrapped in mango)\n4x Ebi Ten (shrimp tempura)\n4x Avocado Kani (surimi wrapped in avocado)\n6x Futomaki Ohio Yaki (baked butterfish)',
            descPL:'4x Rainbow (surimi owijane wachlarzem ryb)\n4x Mango Sake (łosoś owijany mango)\n4x Ebi Ten (krewetka w tempurze)\n4x Awokado Kani (surimi owijane awokado)\n6x Futomaki Ohio Yaki (pieczona maślana)'
          },
          { 
            en:'AKASHI 38 pcs.', pl:'AKASHI 38 szt.', price:'210 zł',
            descEN:'8x Rainbow (surimi wrapped in variety of fish)\n8x Goma Sake Yaki (baked salmon topped with wakame)\n4x Ebi Ten (shrimp tempura)\n6x Sake Philadelphia (salmon with cream cheese)\n6x Ohio Ten (butterfish in tempura)\n6x Maguro Spice (spicy tuna)',
            descPL:'8x Rainbow (surimi owijane wachlarzem ryb)\n8x Goma Sake Yaki (pieczony łosoś obłożony wakame)\n4x Ebi Ten (krewetka w tempurze)\n6x Sake Philadelphia (łosoś z serkiem philadelphia)\n6x Ohio Ten (maślana w tempurze)\n6x Maguro Spice (pikantny tuńczyk)'
          },
          { 
            en:'KUROISO 52 pcs.', pl:'KUROISO 52 szt.', price:'290 zł',
            descEN:'8x Rainbow (surimi wrapped in variety of fish)\n8x Tempura Ohio (butterfish in tempura)\n8x Goma Yaki Sake (salmon topped with wakame)\n8x Kegon (salmon wrapped in eel)\n8x Ebi Ten Ohio Tataki (shrimp tempura topped with butterfish tartare)\n6x Sake Philadelphia (salmon with cream cheese)\n6x Suzuki Yaki (spicy zander)',
            descPL:'8x Rainbow (surimi owijane wachlarzem ryb)\n8x Tempura Ohio (maślana w tempurze)\n8x Goma Yaki Sake (łosoś obłożony wakame)\n8x Kegon (łosoś owijany węgorzem)\n8x Ebi Ten Ohio Tataki (krewetka w tempurze obłożona tatarem z maślanej)\n6x Sake Philadelphia (łosoś z serkiem philadelphia)\n6x Suzuki Yaki (pikantny sandacz)'
          },
          {
            en:'BIWA 60 pcs.', pl:'BIWA 60 szt.', price:'340 zł',
            descEN:'8x Gold California (surimi wrapped in salmon)\n8x Ohio Ten Nashi (tempura butterfish wrapped in Japanese pear)\n8x Ebi Ten Avocado (tempura shrimp wrapped in avocado)\n8x Kegon (salmon wrapped in grilled eel)\n8x Tempura Cali Rae (spicy sea bream in tempura)\n6x Maguro Philadelphia (tuna with cream cheese)\n6x Ohio Spice Mango (spicy butterfish with mango)\n8x Nigiri (2x salmon, 2x tuna, 2x butterfish, 2x shrimp)',
            descPL:'8x Gold California (surimi owijane łososiem)\n8x Ohio Ten Nashi (maślana w tempurze owijana japońską gruszką)\n8x Ebi Ten Avocado (krewetka w tempurze owijana awokado)\n8x Kegon (łosoś owijany węgorzem)\n8x Tempura Cali Rae (pikantna dorada cała w tempurze)\n6x Maguro Philadelphia (tuńczyk z serkiem philadelphia)\n6x Ohio Spice Mango (pikantna maślana z mango)\n8x Nigiri (2x łosoś, 2x tuńczyk, 2x maślana, 2x krewetka)'
          }
        ]
      },
      {
        id:'starters',
        title:{en:'Starters', pl:'Przystawki'},
        gallery:[
            {src:'images/wakame.jpg'},
            {src:'images/ebiten.jpg'},
            {src:'images/sake-tataki.jpg'}
        ], 
        desc:{en:'A selection of light and fresh starters to begin your sushi experience.', pl:'Wybór lekkich i świeżych przystawek na rozpoczęcie przygody z sushi.'},
        items:[
          {en:'Goma Wakame', pl:'Goma Wakame', price:'20 zł', descEN:'seaweed salad', descPL:'sałatka z wodorostów'},
          {en:'Ebi Ten (3 pcs)', pl:'Ebi Ten (3 szt.)', price:'30 zł', descEN:'shrimp tempura served with ponzu sauce', descPL:'krewetki w tempurze z sosem ponzu'},
          {en:'Sake Tataki', pl:'Sake Tataki', price:'50 zł', descEN:'salmon tartare', descPL:'tatar z łososia'},
          {en:'Maguro Tataki', pl:'Maguro Tataki', price:'55 zł', descEN:'tuna tartare', descPL:'tatar z tuńczyka'}
        ]
      },
      {
        id:'soups',
        title:{en:'Soups', pl:'Zupy'},
        img:'images/ramen-zupa.jpg',
        desc:{en:'Traditional Japanese soups, including rich Ramen bowls with various fillings.', pl:'Tradycyjne japońskie zupy, w tym bogate miski Ramenu z różnymi dodatkami.'},
        note:{en:'The Ramen portion is 800ml, recommended for sharing (2 people).', pl:'Uwaga: Porcja Ramenu to 800ml, polecamy do podziału (dla 2 osób).'},
        items:[
          {en:'Ramen Chicken', pl:'Ramen Chicken', price:'48 zł', descEN:'flavorful broth with chicken, vegetables, and ramen noodles', descPL:'bulion z warzywami, mięsem i makaronem ramen'},
          {en:'Ramen Beef', pl:'Ramen Beef', price:'55 zł', descEN:'beef ramen', descPL:'ramen wołowy'},
          {en:'Seafood Udon', pl:'Seafood Udon', price:'58 zł', descEN:'Spicy seafood soup with vegetables and udon noodles', descPL:'Ostra zupa z owocami morza, warzywami i makaronem udon'}
        ]
      },
      {
        id:'nigiri',
        title:{en:'Nigiri (2 pcs)', pl:'Nigiri (2 szt.)'},
        img:'images/nigiri1.jpg',
        desc:{en:'Hand-pressed rice topped with fresh fish or seafood.', pl:'Ręcznie formowany ryż z plastrem świeżej ryby lub owoców morza.'},
        items:[
          {en:'Sake', pl:'Sake', price:'26 zł', descEN:'salmon', descPL:'łosoś'},
          {en:'Ohio', pl:'Ohio', price:'25 zł', descEN:'butterfish', descPL:'ryba maślana'},
          {en:'Maguro', pl:'Maguro', price:'30 zł', descEN:'tuna', descPL:'tuńczyk'},
          {en:'Unagi', pl:'Unagi', price:'30 zł', descEN:'eel', descPL:'węgorz'},
          {en:'Hotate', pl:'Hotate', price:'32 zł', descEN:'scallops', descPL:'małże św. Jakuba'},
          {en:'Tako', pl:'Tako', price:'30 zł', descEN:'octopus', descPL:'ośmiornica'},
          {en:'Ika', pl:'Ika', price:'30 zł', descEN:'squid', descPL:'kalmar'},
          {en:'Ebi', pl:'Ebi', price:'30 zł', descEN:'shrimp', descPL:'krewetka'}
        ]
      },
      {
        id:'futomaki',
        title:{en:'Futomaki (4 pcs)', pl:'Futomaki (4 szt.)'},
        img:'images/futomaki.jpg',
        desc:{en:'Thick, traditional rolls with nori on the outside.', pl:'Grube, tradycyjne rolki z nori na zewnątrz.'},
        items:[
          {en:'Sake Philadelphia', pl:'Sake Philadelphia', price:'38 zł', descEN:'salmon with philadelphia cream cheese', descPL:'łosoś z serkiem philadelphia'},
          {en:'Maguro Negi Togarashi', pl:'Maguro Negi Togarashi', price:'42 zł', descEN:'spicy tuna with leek', descPL:'tuńczyk z porem na ostro'},
          {en:'Ohio Spice Mango', pl:'Ohio Spice Mango', price:'40 zł', descEN:'spicy butterfish with mango', descPL:'pikantna ryba maślana z mango'},
          {en:'Ebi Spicy', pl:'Ebi Spicy', price:'40 zł', descEN:'spicy shrimp', descPL:'pikantna krewetka'},
          {en:'Ebi Tempura', pl:'Ebi Tempura', price:'40 zł', descEN:'shrimp tempura', descPL:'krewetka w tempurze'},
          {en:'Unagi Kabayaki', pl:'Unagi Kabayaki', price:'45 zł', descEN:'grilled eel with kabayaki sauce', descPL:'grillowany węgorz w sosie kabayaki'},
          {en:'Ika Tempura', pl:'Ika Tempura', price:'48 zł', descEN:'squid tempura', descPL:'kalmar w tempurze'},
          {en:'Veggie', pl:'Veggie', price:'36 zł', descEN:'vegetables', descPL:'warzywa'}
        ]
      },
      {
        id:'uramaki',
        title:{en:'Uramaki & Tempura (8 pcs)', pl:'Uramaki & Tempura (8 szt.)'},
        img:'images/tempura.jpg',
        desc:{en:'Our selection of Uramaki (inside-out rolls) and crispy Tempura Uramaki.', pl:'Nasz wybór Uramaki (rolek ryżem na zewnątrz) oraz chrupiących Uramaki w Tempurze.'},
        isSplit: true,
        itemsLeft:[
          {en:'Sake Philadelphia', pl:'Sake Philadelphia', price:'38 zł', descEN:'salmon with philadelphia cream cheese', descPL:'łosoś z serkiem philadelphia'},
          {en:'Awokado Sake', pl:'Awokado Sake', price:'42 zł', descEN:'salmon wrapped in avocado', descPL:'łosoś owijany awokado'},
          {en:'Mango Sake', pl:'Mango Sake', price:'42 zł', descEN:'salmon wrapped in mango', descPL:'łosoś owijany mango'},
          {en:'Maguro Orange Pepper', pl:'Maguro Orange Pepper', price:'45 zł', descEN:'tuna with chopped leek and orange pepper', descPL:'tuńczyk z siekanym porem i orange pepper'},
          {en:'Ebi Ten Mamemori', pl:'Ebi Ten Mamemori', price:'42 zł', descEN:'shrimp tempura wrapped in soy paper', descPL:'krewetka w tempurze zawijana w papier sojowy'},
          {en:'Gold California', pl:'Gold California', price:'40 zł', descEN:'surimi wrapped in salmon', descPL:'surimi owijane łososiem'},
          {en:'Rainbow', pl:'Rainbow', price:'48 zł', descEN:'surimi wrapped in assorted fish', descPL:'surimi owijane wachlarzem ryb'},
          {en:'Ohio Spice Sake', pl:'Ohio Spice Sake', price:'42 zł', descEN:'salmon wrapped in butterfish', descPL:'łosoś owijany opalaną maślaną'},
          {en:'Maguro Spicy Ebi Ten', pl:'Maguro Spicy Ebi Ten', price:'45 zł', descEN:'shrimp tempura wrapped in seared tuna', descPL:'krewetka w tempurze owijana opalanym tuńczykiem'},
          {en:'Kegon', pl:'Kegon', price:'45 zł', descEN:'salmon wrapped in grilled eel', descPL:'łosoś owijany grillowanym węgorzem'},
          {en:'Sake Aburi', pl:'Sake Aburi', price:'45 zł', descEN:'salmon wrapped in seared spicy salmon', descPL:'łosoś owijany opalanym pikantnym łososiem'},
          {en:'Tobiko Ohio Ten', pl:'Tobiko Ohio Ten', price:'48 zł', descEN:'butterfish in tempura coated with caviar', descPL:'maślana w tempurze obtoczona kawiorem z latającej ryby'},
          {en:'Nashi Sake', pl:'Nashi Sake', price:'45 zł', descEN:'salmon wrapped in Japanese pear', descPL:'łosoś owijany japońską gruszką'},
          {en:'Sake Tataki Ebiten', pl:'Sake Tataki Ebiten', price:'48 zł', descEN:'shrimp tempura wrapped in salmon tartare', descPL:'krewetka w tempurze obłożona tatarem z łososia'}
        ],
        itemsRight:[
          {en:'Tempura Sake', pl:'Tempura Sake', price:'38 zł', descEN:'salmon', descPL:'łosoś'},
          {en:'Tempura Ohio', pl:'Tempura Ohio', price:'38 zł', descEN:'butterfish', descPL:'maślana'},
          {en:'Tempura Maguro', pl:'Tempura Maguro', price:'42 zł', descEN:'tuna', descPL:'tuńczyk'},
          {en:'Tempura Ebi', pl:'Tempura Ebi', price:'40 zł', descEN:'steamed shrimp', descPL:'parzona krewetka'},
          {en:'Tempura Unagi Kabayaki', pl:'Tempura Unagi Kabayaki', price:'45 zł', descEN:'grilled eel', descPL:'grillowany węgorz'}
        ]
      },
      {
        id:'oyakomaki',
        title:{en:'Oyakomaki (2 pcs)', pl:'Oyakomaki (2 szt.)'},
        img:'images/oyakomaki.jpg',
        desc:{en:'Our specialty rolls, often wrapped in fish or avocado instead of nori.', pl:'Nasze specjalne rolki, często zawijane w rybę lub awokado zamiast nori.'},
        items:[
          {en:'Sake Ebi Tataki', pl:'Sake Ebi Tataki', price:'36 zł', descEN:'chopped shrimp wrapped in salmon', descPL:'siekana krewetka owijana w łososia'},
          {en:'Sake Ikura', pl:'Sake Ikura', price:'42 zł', descEN:'caviar with salmon wrapped in tuna', descPL:'kawior z łososia owijany tuńczykiem'},
          {en:'Maguro Sake Tataki', pl:'Maguro Sake Tataki', price:'45 zł', descEN:'chopped salmon wrapped in tuna', descPL:'siekany łosoś owijany tuńczykiem'}
        ]
      },
      {
        id:'sashimi',
        title:{en:'Sashimi (9 pcs)', pl:'Sashimi (9 szt.)'},
        img:'images/sashimi.jpg',
        desc:{en:'Thinly sliced raw fish and seafood, served without rice.', pl:'Cienko krojone slajsy surowej ryby i owoców morza, podawane bez ryżu.'},
        items:[
          {en:'Mizu', pl:'Mizu', price:'95 zł', descEN:'slices of raw fish — salmon, tuna, butterfish', descPL:'slajsy surowej ryby — łosoś, tuńczyk, maślana'}
        ]
      }
    ];

    let LANG = 'pl';

    function setLang(l) {
      if(LANG===l) return;
      LANG = l;
      document.querySelectorAll('.lang-opt').forEach(b => b.classList.toggle('active', b.innerText.toLowerCase() === l));
      
      const content = document.querySelector('.left');
      content.style.opacity = '0';
      content.style.transform = 'translateY(10px)';
      
      setTimeout(() => {
        render();
        content.style.opacity = '1';
        content.style.transform = 'translateY(0)';
      }, 300);
      
      // Update nav chips as well
      updateNav();
    }

    function renderItem(i, idx) {
        // Animation delay calc
        const delay = idx * 0.05 + 0.1;
        return `
        <div class="item" style="animation: none; opacity: 1;">
            <div class="item-info">
                <div class="item-name">${LANG==='en'?i.en:i.pl}</div>
                <div class="item-desc">${LANG==='en'?i.descEN:i.descPL}</div>
            </div>
            <div class="item-price">${i.price}</div>
        </div>
        `;
    }

    function updateNav() {
        const nav = document.getElementById('nav-scroller');
        nav.innerHTML = DATA.map(s => `
          <button class="nav-pill" id="btn-${s.id}" onclick="scrollToId('${s.id}')">
            ${LANG==='en'?s.title.en:s.title.pl}
          </button>
        `).join('');
    }

    function scrollToId(id) {
        const el = document.getElementById(id);
        const offset = 100; // dynamic island height
        const bodyRect = document.body.getBoundingClientRect().top;
        const elementRect = el.getBoundingClientRect().top;
        const elementPosition = elementRect - bodyRect;
        const offsetPosition = elementPosition - offset;

        window.scrollTo({
            top: offsetPosition,
            behavior: "smooth"
        });
    }

    function render() {
      // Texts
      document.getElementById('sub').innerText = LANG==='en' ? 'Fine sushi — Menu' : 'Wyborne sushi — Menu';
      document.getElementById('lbl-contacts').innerText = LANG==='en' ? 'Contacts' : 'Kontakt';
      document.getElementById('lbl-web').innerText = LANG==='en' ? 'Menu — open web version' : 'Menu — wersja online';

      // Update Info Modal Content
      document.getElementById('info-title').innerText = LANG==='en'?ALLERGIES.title.en:ALLERGIES.title.pl;
      document.getElementById('info-text').innerText = LANG==='en'?ALLERGIES.text.en:ALLERGIES.text.pl;
      document.getElementById('info-note').innerText = LANG==='en'?ALLERGIES.service.en:ALLERGIES.service.pl;

      // Menu
      const container = document.getElementById('menu-container');
      const menuHTML = DATA.map(section => {
        const title = LANG==='en'?section.title.en:section.title.pl;
        const desc = LANG==='en'?section.desc.en:section.desc.pl;
        
        // Image logic
        let mediaHtml = '';
        if(section.gallery) {
            mediaHtml = `<div class="stack-grid">
                ${section.gallery.map(g=> `<img src="${g.src}" class="stack-img" onclick="openLb('${g.src}')">`).join('')}
            </div>`;
        } else if(section.img) {
            mediaHtml = `<img src="${section.img}" class="single-img" onclick="openLb('${section.img}')">`;
        }

        // Note logic
        const noteHtml = section.note ? `<div class="note">${LANG==='en'?section.note.en:section.note.pl}</div>` : '';

        // Items Logic (Split or Normal)
        let itemsHtml = '';
        if(section.isSplit) {
            const tempuraNote = LANG==='en' ? '(whole roll in tempura batter)' : '(cała rolka w cieście tempura)';
            itemsHtml = `
            <div class="cols-2">
                <div>
                    <div class="col-title">Uramaki</div>
                    ${section.itemsLeft.map((it, idx) => renderItem(it, idx)).join('')}
                </div>
                <div>
                    <div class="col-title">
                        ${LANG==='en'?'Tempura':'W Tempurze'}
                        <div style="font-size:9px; font-weight:400; text-transform:none; color:#777; margin-left:auto; letter-spacing:0;">${tempuraNote}</div>
                    </div>
                    ${section.itemsRight.map((it, idx) => renderItem(it, idx)).join('')}
                </div>
            </div>`;
        } else {
            itemsHtml = section.items.map((it, idx) => renderItem(it, idx)).join('');
        }

        const btnText = LANG==='en'?'View items':'Pokaż pozycje';

        return `
        <div class="menu-block reveal-on-scroll" id="${section.id}">
            <div class="block-header"><h2>${title}</h2></div>
            <div class="intro-media">${mediaHtml}</div>
            <div class="intro-text">${desc}</div>
            ${noteHtml}
            
            <div class="accordion-wrapper" onclick="toggleAcc(this)">
                <button class="accordion-trigger">
                    <span class="trigger-text">${btnText}</span>
                    <span class="trigger-icon">▼</span>
                </button>
                <div class="accordion-content">
                    <div class="min-h-0">
                        <div class="items-list">
                            ${itemsHtml}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        `;
      }).join('');

      // Add static allergy block at the bottom
      const allergyHTML = `
        <div class="menu-block reveal-on-scroll" style="border:none; box-shadow:none; background:transparent;">
            <div class="block-header" style="padding-bottom:10px; padding-left:0;">
                <h2 style="font-size:18px; color:var(--muted); opacity:0.8;">${LANG==='en'?ALLERGIES.title.en:ALLERGIES.title.pl}</h2>
            </div>
            <div style="font-size:13px; color:#666; line-height:1.6; background:rgba(255,255,255,0.7); padding:24px; border-radius:24px; border:1px solid rgba(255,255,255,0.5);">
                ${LANG==='en'?ALLERGIES.text.en:ALLERGIES.text.pl}
                <div style="margin-top:16px; font-style:italic; padding-top:16px; border-top:1px dashed #ccc;">
                    ${LANG==='en'?ALLERGIES.service.en:ALLERGIES.service.pl}
                </div>
            </div>
        </div>
      `;

      container.innerHTML = menuHTML + allergyHTML;

      // Contacts
      document.getElementById('contacts-list').innerHTML = `
        <a href="tel:+48502525544" class="c-btn">
            <img src="images/phone.png"> <span>+48 502 525 544</span>
        </a> 
        <a href="https://www.instagram.com/ksiestwosushi?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" class="c-btn">
            <img src="images/instagram.png"> <span>@ksiestwosushi</span>
        </a>
        <a href="https://maps.app.goo.gl/ZT1PfgScLAJkTbhx7" target="_blank" class="c-btn">
            <img src="images/google_maps.png"> <span>Krupówki 38A</span>
        </a>
      `;

      // Re-init observer for new elements
      initObserver();
    }

    // --- ANIMATIONS & OBSERVER ---
    function initObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('revealed');
                }
            });
        }, { threshold: 0.1, rootMargin: "0px 0px -50px 0px" });

        document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
    }
    
    // --- SCROLL SPY FOR DYNAMIC ISLAND ---
    window.addEventListener('scroll', () => {
        const sections = DATA.map(s => s.id);
        let current = '';
        
        sections.forEach(id => {
            const section = document.getElementById(id);
            if (section) {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 150 && rect.bottom >= 150) {
                    current = id;
                }
            }
        });

        document.querySelectorAll('.nav-pill').forEach(btn => {
            btn.classList.remove('active');
            if(btn.id === `btn-${current}`) {
                btn.classList.add('active');
                // Auto scroll nav container to active element
                btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
        });
    });

    // --- ACCORDION LOGIC ---
    function toggleAcc(el) {
        el.classList.toggle('active');
        
        // Stagger animation for items inside
        if (el.classList.contains('active')) {
            const items = el.querySelectorAll('.item');
            items.forEach((item, index) => {
                item.style.transitionDelay = `${index * 50}ms`;
            });
        }
    }

    // --- INFO MODAL ---
    function openInfo() {
        document.getElementById('info-modal').classList.add('open');
        const btn = document.querySelector('.allergy-btn');
        if(btn) {
            btn.style.opacity = '0';
            btn.style.pointerEvents = 'none';
        }
    }
    function closeInfo(e) {
        if (e.target.id === 'info-modal' || e.target.classList.contains('info-close')) {
             document.getElementById('info-modal').classList.remove('open');
        }
    }

    // --- LIGHTBOX ---
    function openLb(src) {
        document.getElementById('lb-img').src = src;
        document.getElementById('lb').classList.add('open');
    }
    function closeLb() {
        document.getElementById('lb').classList.remove('open');
    }

    // INIT
    updateNav();
    render();

  </script>
</body>
</html>
