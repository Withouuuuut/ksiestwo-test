<!DOCTYPE html>
<html lang="pl"> <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Księstwo Sushi — Menu</title>
  <style>
    :root{
      --bg:#f8f6f4;
      --card:#ffffff;
      --muted:#7b7b7b;
      --accent:#d88b6a;
      --text:#111;
      --dark-btn:#222; 
      --maxw:1000px;
      --radius:16px;
      --shadow: 0 10px 40px -10px rgba(0,0,0,0.08);
      --ease: cubic-bezier(0.25, 1, 0.5, 1);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Georgia", "Times New Roman", serif;
      background: var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      padding:24px;
      display:flex;
      justify-content:center;
    }

    .wrap{
      width:100%;
      max-width:var(--maxw);
      background: rgba(255,255,255,0.92);
      border-radius:24px;
      padding:24px;
      box-shadow: var(--shadow);
      padding-top: 80px; 
      backdrop-filter: blur(10px);
      
      opacity: 0;
      animation: fadeIn 0.8s var(--ease) forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* --- HEADER --- */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:20px;
    }
    .brand{
      display:flex;
      gap:16px;
      align-items:center;
    }
    .logo{
      width:60px;
      height:60px;
      border-radius:12px;
      background:linear-gradient(135deg,var(--accent),#f3c9b3);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:#fff;
      font-size:20px;
      box-shadow:0 8px 20px -6px rgba(216,139,106,0.4);
    }
    h1{margin:0;font-size:22px;letter-spacing:0.5px}
    .sub{color:var(--muted); font-size:14px; font-style: italic;}

    /* --- LANGUAGE SWITCHER --- */
    .fixed-widget {
      position: fixed;
      top: 24px;
      right: 24px;
      z-index: 200;
      transition: transform 0.4s var(--ease), opacity 0.4s var(--ease);
    }
    /* Hidden state for scroll */
    .fixed-widget.hidden {
        transform: translateY(-100px);
        opacity: 0;
        pointer-events: none;
    }

    .lang-row {
      background: #fff;
      padding: 5px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      display: flex;
      gap: 4px;
    }
    .lang-btn {
      background: transparent;
      border: none;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
      color: var(--muted);
      transition: all 0.2s var(--ease);
    }
    .lang-btn.active {
      background: var(--accent);
      color: white;
      box-shadow: 0 2px 8px rgba(216,139,106,0.3);
    }

    /* --- NAVIGATION --- */
    nav{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:30px;
    }
    .nav-chip{
      background:#fff;
      padding:10px 16px;
      border-radius:100px;
      font-weight:600;
      border:1px solid rgba(0,0,0,0.04);
      cursor:pointer;
      font-size:14px;
      color: var(--muted);
      transition: all 0.3s var(--ease);
      font-family: sans-serif;
    }
    .nav-chip:hover {
      background: #fff5f0;
      color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    /* --- LAYOUT --- */
    .content{
      display:flex;
      gap:40px;
      align-items:flex-start;
    }
    .left{
      flex:1;
      min-width:0; /* fix flex overflow */
      transition: opacity 0.3s var(--ease);
    }
    .right{
      width:300px;
      flex-shrink: 0;
    }

    @media (max-width:900px){
      .content{flex-direction:column-reverse; gap:30px;}
      .right{width:100%}
    }

    /* --- SECTION STYLES --- */
    .menu-block {
        background: #fff;
        border-radius: var(--radius);
        margin-bottom: 24px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.02);
        border: 1px solid rgba(0,0,0,0.02);
        overflow: hidden;
    }

    .block-header {
        padding: 20px;
    }
    .block-header h2 {
        margin: 0 0 10px 0;
        font-size: 20px;
        color: var(--text);
    }

    /* --- IMAGES --- */
    .intro-media {
        width: 100%;
        padding: 0 8px 10px 8px; 
    }
    
    .single-img {
        width: 100%;
        height: 240px;
        object-fit: cover;
        border-radius: 12px;
        cursor: pointer;
        transition: transform 0.5s var(--ease);
    }
    .single-img:hover { transform: scale(1.02); }

    .stack-grid {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
    .stack-img {
        width: 100%;
        height: 160px; 
        object-fit: cover;
        border-radius: 12px;
        cursor: pointer;
        transition: transform 0.4s var(--ease), box-shadow 0.4s var(--ease);
    }
    .stack-img:hover { 
        transform: scale(1.02); 
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        z-index: 2;
    }

    .intro-text {
        padding: 0 20px 6px 20px; /* Reduced bottom padding */
        color: var(--muted);
        font-size: 15px;
        line-height: 1.5;
    }
    .note {
        font-size: 13px;
        color: var(--muted);
        padding: 15px 20px;
        background: #fafafa;
        border-top: 1px solid #eee;
    }

    /* --- ACCORDION --- */
    .accordion-trigger {
        width: 100%;
        padding: 12px 20px; /* Reduced vertical padding */
        background: #fdfdfd;
        border: none;
        border-top: 1px solid #f0f0f0;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background 0.2s;
    }
    .accordion-trigger:hover { background: #f8f8f8; }
    
    .trigger-text {
        font-weight: 700;
        color: var(--accent);
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    .trigger-icon {
        font-size: 12px;
        color: var(--muted);
        transition: transform 0.4s var(--ease);
    }
    .accordion-wrapper.active .trigger-icon { transform: rotate(180deg); }

    .accordion-content {
        display: grid;
        grid-template-rows: 0fr;
        transition: grid-template-rows 0.6s var(--ease), opacity 0.6s var(--ease);
        opacity: 0.4;
    }
    .accordion-wrapper.active .accordion-content {
        grid-template-rows: 1fr;
        opacity: 1;
    }
    .min-h-0 { overflow: hidden; }
    .items-list { padding: 20px; background: #fff; }

    /* --- MENU ITEMS --- */
    .item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 16px;
        padding-bottom: 16px;
        border-bottom: 1px dashed #eee;
        transition: transform 0.2s;
    }
    .item:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }
    .item-info { flex: 1; padding-right: 20px; }
    .item-name { font-weight: 700; font-size: 16px; margin-bottom: 4px; }
    .item-desc { 
        font-size: 14px; color: var(--muted); line-height: 1.4; white-space: pre-line;
    }
    .item-price { 
        font-weight: 700; color: var(--accent); font-size: 16px; white-space: nowrap;
    }

    /* --- URAMAKI GRID --- */
    .cols-2 {
        display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
    }
    .col-title {
        font-size: 14px; font-weight: 700; color: var(--accent);
        text-transform: uppercase; border-bottom: 2px solid #ffeadd;
        padding-bottom: 8px; margin-bottom: 16px;
    }
    @media (max-width:700px) { .cols-2 { grid-template-columns: 1fr; gap: 20px; } }

    /* --- FLOATING ALLERGY BTN --- */
    .allergy-btn {
        position: fixed;
        bottom: 30px; 
        right: 30px;
        width: 56px; height: 56px;
        background: #fff;
        color: var(--accent);
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 28px; font-weight: 800; font-family: sans-serif;
        box-shadow: 0 8px 24px rgba(216, 139, 106, 0.4);
        cursor: pointer;
        z-index: 100;
        border: 2px solid var(--accent);
        transition: transform 0.3s var(--ease), opacity 0.3s var(--ease);
        animation: pulse 2s infinite;
    }
    .allergy-btn:hover { animation: none; transform: scale(1.1); }
    
    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(216, 139, 106, 0.7); }
        70% { box-shadow: 0 0 0 15px rgba(216, 139, 106, 0); }
        100% { box-shadow: 0 0 0 0 rgba(216, 139, 106, 0); }
    }

    /* --- INFO MODAL --- */
    .info-modal {
        position: fixed; inset: 0; z-index: 2000;
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(8px);
        display: flex; justify-content: center; align-items: center;
        opacity: 0; pointer-events: none;
        transition: opacity 0.3s var(--ease);
        padding: 20px;
    }
    .info-modal.open { opacity: 1; pointer-events: auto; }
    
    .info-card {
        background: #fff;
        width: 100%; max-width: 450px;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        transform: scale(0.9); opacity: 0;
        transition: all 0.4s var(--ease);
        position: relative;
        text-align: center;
    }
    .info-modal.open .info-card { transform: scale(1); opacity: 1; }
    
    .info-close {
        position: absolute; top: 15px; right: 20px;
        font-size: 28px; color: var(--muted); cursor: pointer;
        line-height: 1;
    }
    .info-icon { font-size: 40px; margin-bottom: 16px; display: block; }
    .info-title { font-size: 20px; font-weight: 700; margin-bottom: 12px; color: var(--text); }
    .info-text { font-size: 15px; line-height: 1.6; color: var(--muted); margin-bottom: 20px; }
    .info-note { 
        font-size: 13px; font-style: italic; color: #555; 
        background: #f4f4f4; padding: 12px; border-radius: 12px; 
    }

    /* --- SIDEBAR & FOOTER --- */
    .contact-card {
        background: #fff;
        padding: 24px;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
    }
    .contact-card h3 { margin: 0 0 20px 0; font-size: 18px; }
    
    .c-btn {
        display: flex;
        align-items: center;
        gap: 12px;
        background: #222;
        color: #fff;
        text-decoration: none;
        padding: 14px 20px;
        border-radius: 50px;
        margin-bottom: 10px;
        font-size: 14px;
        font-weight: 600;
        transition: transform 0.3s var(--ease), box-shadow 0.3s var(--ease);
    }
    .c-btn img { width: 20px; height: 20px; filter: invert(1); }
    .c-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }

    footer {
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid rgba(0,0,0,0.05);
        display: flex;
        justify-content: space-between;
        color: var(--muted);
        font-size: 13px;
    }

    /* --- LIGHTBOX --- */
    .lightbox {
        position: fixed; inset: 0; z-index: 999;
        background: rgba(0,0,0,0.9);
        display: flex; justify-content: center; align-items: center;
        opacity: 0; pointer-events: none;
        transition: opacity 0.3s var(--ease);
        backdrop-filter: blur(5px);
    }
    .lightbox.open { opacity: 1; pointer-events: auto; }
    .lb-img {
        max-width: 90%; max-height: 90vh;
        border-radius: 12px;
        transform: scale(0.9);
        transition: transform 0.4s var(--ease);
        box-shadow: 0 0 50px rgba(0,0,0,0.5);
    }
    .lightbox.open .lb-img { transform: scale(1); }
    .lb-close {
        position: absolute; top: 20px; right: 30px;
        color: #fff; font-size: 40px; cursor: pointer;
        opacity: 0.7; transition: 0.2s;
    }
    .lb-close:hover { opacity: 1; transform: scale(1.1); }

  </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body>

  <div class="fixed-widget">
    <div class="lang-row">
      <button class="lang-btn active" onclick="setLang('pl')">PL</button>
      <button class="lang-btn" onclick="setLang('en')">EN</button>
    </div>
  </div>
  
  <div class="allergy-btn" onclick="openInfo()">!</div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">KS</div>
        <div>
          <h1>Księstwo Sushi</h1>
          <div class="sub" id="sub">Fine sushi — Menu</div>
        </div>
      </div>
    </header>

    <nav id="nav-container"></nav>

    <div class="content">
      <div class="left" id="menu-container">
        <!-- Menu Items Render Here -->
      </div>

      <div class="right">
        <div class="contact-card">
          <h3 id="lbl-contacts">Kontakt</h3>
          <div id="contacts-list"></div>
        </div>
      </div>
    </div>

    <footer>
      <span>Księstwo Sushi 2024</span>
      <span id="lbl-web">Menu — online version</span>
    </footer>
  </div>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lb" onclick="closeLb()">
    <span class="lb-close">&times;</span>
    <img src="" class="lb-img" id="lb-img">
  </div>
  
  <!-- INFO MODAL -->
  <div class="info-modal" id="info-modal" onclick="closeInfo(event)">
    <div class="info-card">
      <span class="info-close" onclick="closeInfo(event)">&times;</span>
      <div class="info-icon">⚠️</div>
      <div class="info-title" id="info-title"></div>
      <div class="info-text" id="info-text"></div>
      <div class="info-note" id="info-note"></div>
    </div>
  </div>

  <script>
    // --- SCROLL LOGIC FOR LANG WIDGET ---
    window.addEventListener('scroll', () => {
        const widget = document.querySelector('.fixed-widget');
        if (window.scrollY > 50) {
            widget.classList.add('hidden');
        } else {
            widget.classList.remove('hidden');
        }
    });

    // --- ALLERGENS ---
    const ALLERGIES = {
        title: { en: 'Allergy Information', pl: 'Informacja o alergenach' },
        text: {
            en: 'According to the recipe, they may contain: gluten, cucumber, oshinko, kampyo, avocado, mango, melon, lettuce, sesame seeds, Philadelphia cream cheese, mayonnaise, sauces, edible gold.',
            pl: 'Zgodnie z recepturą mogą zawierać: gluten, ogórek, oshinko, kampyo, awokado, mango, melon, sałatę, sezam, serek philadelphia, majonez, sosy, złoto jadalne.'
        },
        service: {
            en: 'We kindly inform you that we add a waiter service of 10% to the final bill.',
            pl: 'Uprzejmie informujemy, że doliczamy serwis kelnerski w wysokości 10% do rachunku końcowego.'
        }
    };

    // --- DATA ---
    const DATA = [
      {
        id:'sets',
        title:{en:'Sushi Sets', pl:'Zestawy Sushi'},
        img: 'images/zestawy.jpg', 
        desc:{en:'Curated combinations of our finest rolls, perfect for experiencing a variety of flavors.', pl:'Starannie dobrane kompozycje naszych najlepszych rolek, idealne do poznania różnorodności smaków.'},
        items:[
          { en:'Ki Iro 14 pc.', pl:'Ki Iro 14 szt.', price:'70 zł',
            descEN:'3x hosomaki salmon (raw Fish)\n3x hosomaki calabash (marinated pumpkin shoots)\n4x rainbow (surimi wraped in variety of raw fish)\n4x futomaki Ohio yaki (baked butterfish)',
            descPL:'3x hosomaki łosoś (surowa ryba)\n3x hosomaki tykwa (marynowane pędy dyni)\n4x rainbow (surimi owijane wachlarzem surowych ryb)\n4x futomaki ohioyaki (pieczona ryba maślana)' },
          { en:'Orenji 16 pc.', pl:'Orenji 16 szt.', price:'90 zł',
            descEN:'4x ebi ten (shrimp tempura)\n4x gold california (surimi wraped in raw salmon)\n4x avocado kani (surimi wraped in avocado)\n4x Ohio yaki (baked butterfish covered in seasame)',
            descPL:'4x ebi ten (krewetka w tempurze)\n4x gold california (surimi owijane surowym łososiem)\n4x awokado kani (surimi owijane awokado)\n4x ohioyaki (pieczona ryba maślana obtoczona w sezamie)' },
          { en:'Aka 24 pc.', pl:'Aka 24 szt.', price:'130 zł',
            descEN:'4x gold california (surimi wraped in raw salmon)\n4x ebi ten (shrimp tempura)\n4x mango sake (raw salmon wraped in a mango)\n4x avocado kani (surimi wraped in avocado)\n6x futomaki ohio ten (butterfish tempura)',
            descPL:'4x gold california (surimi owijane surowym łososiem)\n4x ebi ten (krewetka w tempurze)\n4x mango sake (surowy łosoś owijany mango)\n4x awokado kani (surimi owijane awokado)\n6x Futomaki ohio ten (ryba maślana w tempurze)' }
        ]
      },
      {
        id:'starters',
        title:{en:'Starters', pl:'Przystawki'},
        gallery:[
            {src:'images/wakame.jpg'},
            {src:'images/ebiten.jpg'},
            {src:'images/sake-tataki.jpg'}
        ], 
        desc:{en:'A selection of light and fresh starters to begin your sushi experience.', pl:'Wybór lekkich i świeżych przystawek na rozpoczęcie przygody z sushi.'},
        items:[
          {en:'Goma Wakame', pl:'Goma Wakame', price:'20 zł', descEN:'wakame salad', descPL:'sałatka wakame'},
          {en:'Ebiten (3 pcs)', pl:'Ebiten (3 szt.)', price:'30 zł', descEN:'shrimp tempura served with ponzu sauce', descPL:'krewetka tempura z sosem ponzu'},
          {en:'Sake Tataki', pl:'Sake Tataki', price:'50 zł', descEN:'salmon tartare', descPL:'tatar z łososia'},
          {en:'Maguro Tataki', pl:'Maguro Tataki', price:'55 zł', descEN:'tuna tartare', descPL:'tatar z tuńczyka'}
        ]
      },
      {
        id:'soups',
        title:{en:'Soups', pl:'Zupy'},
        img:'images/ramen-zupa.jpg',
        desc:{en:'Traditional Japanese soups, including rich Ramen bowls with various fillings.', pl:'Tradycyjne japońskie zupy, w tym bogate miski Ramenu z różnymi dodatkami.'},
        note:{en:'The Ramen portion is 800ml, recommended for sharing (2 people).', pl:'Uwaga: Porcja Ramenu to 800ml, polecamy do podziału (dla 2 osób).'},
        items:[
          {en:'Ramen Chicken', pl:'Ramen Chicken', price:'48 zł', descEN:'flavorful broth with chicken, vegetables, and ramen noodles', descPL:'bulion z warzywami, mięsem i makaronem ramen'},
          {en:'Ramen Beef', pl:'Ramen Beef', price:'55 zł', descEN:'beef ramen', descPL:'ramen wołowy'}
        ]
      },
      {
        id:'nigiri',
        title:{en:'Nigiri (2 pc)', pl:'Nigiri (2 szt.)'},
        img:'images/nigiri1.jpg',
        desc:{en:'Hand-pressed rice topped with fresh fish or seafood.', pl:'Ręcznie formowany ryż z plastrem świeżej ryby lub owoców morza.'},
        items:[
          {en:'Sake', pl:'Sake', price:'26 zł', descEN:'salmon', descPL:'łosoś'},
          {en:'Ohio', pl:'Ohio', price:'25 zł', descEN:'butterfish', descPL:'ryba maślana'},
          {en:'Maguro', pl:'Maguro', price:'30 zł', descEN:'tuna', descPL:'tuńczyk'},
          {en:'Unagi', pl:'Unagi', price:'30 zł', descEN:'eel', descPL:'węgorz'},
          {en:'Hotate', pl:'Hotate', price:'32 zł', descEN:'scallops', descPL:'małże św. Jakuba'},
          {en:'Tako', pl:'Tako', price:'30 zł', descEN:'octopus', descPL:'ośmiornica'},
          {en:'Ika', pl:'Ika', price:'30 zł', descEN:'squid', descPL:'kalmar'},
          {en:'Ebi', pl:'Ebi', price:'30 zł', descEN:'shrimp', descPL:'krewetka'}
        ]
      },
      {
        id:'futomaki',
        title:{en:'Futomaki (6 pc)', pl:'Futomaki (6 szt.)'},
        img:'images/futomaki.jpg',
        desc:{en:'Thick, traditional rolls with nori on the outside.', pl:'Grube, tradycyjne rolki z nori na zewnątrz.'},
        items:[
          {en:'Sake Philadelphia', pl:'Sake Philadelphia', price:'38 zł', descEN:'salmon with philadelphia cream cheese', descPL:'łosoś z serkiem philadelphia'},
          {en:'Maguro Negi Togarashi', pl:'Maguro Negi Togarashi', price:'42 zł', descEN:'tuna with spicy leek', descPL:'tuńczyk z ostrą dymką'},
          {en:'Ohio Spice Mango', pl:'Ohio Spice Mango', price:'40 zł', descEN:'spicy butterfish with mango', descPL:'pikantna ryba maślana z mango'},
          {en:'Ebi Spicy', pl:'Ebi Spicy', price:'40 zł', descEN:'spicy shrimp', descPL:'pikantna krewetka'},
          {en:'Ebi Tempura', pl:'Ebi Tempura', price:'40 zł', descEN:'shrimp tempura', descPL:'krewetka w tempurze'},
          {en:'Unagi Kabayaki', pl:'Unagi Kabayaki', price:'45 zł', descEN:'grilled eel with kabayaki sauce', descPL:'grillowany węgorz w sosie kabayaki'},
          {en:'Ika Tempura', pl:'Ika Tempura', price:'48 zł', descEN:'squid tempura', descPL:'kalmar w tempurze'},
          {en:'Veggie', pl:'Veggie', price:'36 zł', descEN:'vegetables', descPL:'warzywa'}
        ]
      },
      {
        id:'uramaki',
        title:{en:'Uramaki & Tempura (8 pc)', pl:'Uramaki & Tempura (8 szt.)'},
        img:'images/tempura.jpg',
        desc:{en:'Our selection of Uramaki (inside-out rolls) and crispy Tempura Uramaki.', pl:'Nasz wybór Uramaki (rolek ryżem na zewnątrz) oraz chrupiących Uramaki w Tempurze.'},
        isSplit: true,
        itemsLeft:[
          {en:'Sake Philadelphia', pl:'Sake Philadelphia', price:'38 zł', descEN:'salmon with philadelphia cream cheese', descPL:'łosoś z serkiem philadelphia'},
          {en:'Awokado Sake', pl:'Awokado Sake', price:'42 zł', descEN:'salmon wrapped in avocado', descPL:'łosoś owijany awokado'},
          {en:'Mango Sake', pl:'Mango Sake', price:'42 zł', descEN:'salmon wrapped in mango', descPL:'łosoś owijany mango'},
          {en:'Maguro Orange Pepper', pl:'Maguro Orange Pepper', price:'45 zł', descEN:'tuna with chopped leek and orange pepper', descPL:'tuńczyk z siekanym porem i orange pepper'},
          {en:'Ebi Ten Mamemori', pl:'Ebi Ten Mamemori', price:'42 zł', descEN:'shrimp tempura wrapped in soy paper', descPL:'krewetka w tempurze zawijana w papier sojowy'},
          {en:'Gold California', pl:'Gold California', price:'40 zł', descEN:'surimi wrapped in salmon', descPL:'surimi owijane łososiem'},
          {en:'Rainbow', pl:'Rainbow', price:'48 zł', descEN:'surimi wrapped in assorted fish', descPL:'surimi owijane wachlarzem ryb'},
          {en:'Ohio Spice Sake', pl:'Ohio Spice Sake', price:'42 zł', descEN:'salmon wrapped in butterfish', descPL:'łosoś owijany opalaną maślaną'},
          {en:'Maguro Spicy Ebi Ten', pl:'Maguro Spicy Ebi Ten', price:'45 zł', descEN:'shrimp tempura wrapped in seared tuna', descPL:'krewetka w tempurze owijana opalanym tuńczykiem'},
          {en:'Kegon', pl:'Kegon', price:'45 zł', descEN:'salmon wrapped in grilled eel', descPL:'łosoś owijany grillowanym węgorzem'},
          {en:'Sake Aburi', pl:'Sake Aburi', price:'45 zł', descEN:'salmon wrapped in seared spicy salmon', descPL:'łosoś owijany opalanym pikantnym łososiem'},
          {en:'Tobiko Ohio Ten', pl:'Tobiko Ohio Ten', price:'48 zł', descEN:'butterfish in tempura coated with caviar', descPL:'maślana w tempurze obtoczona kawiorem z latającej ryby'},
          {en:'Nashi Sake', pl:'Nashi Sake', price:'45 zł', descEN:'salmon wrapped in Japanese pear', descPL:'łosoś owijany japońską gruszką'},
          {en:'Sake Tataki Ebiten', pl:'Sake Tataki Ebiten', price:'48 zł', descEN:'shrimp tempura wrapped in salmon tartare', descPL:'krewetka w tempurze obtoczona tatarem z łososia'}
        ],
        itemsRight:[
          {en:'Tempura Sake', pl:'Tempura Sake', price:'38 zł', descEN:'salmon', descPL:'łosoś'},
          {en:'Tempura Ohio', pl:'Tempura Ohio', price:'38 zł', descEN:'butterfish', descPL:'maślana'},
          {en:'Tempura Maguro', pl:'Tempura Maguro', price:'42 zł', descEN:'tuna', descPL:'tuńczyk'},
          {en:'Tempura Ebi', pl:'Tempura Ebi', price:'40 zł', descEN:'steamed shrimp', descPL:'parzona krewetka'},
          {en:'Tempura Unagi Kabayaki', pl:'Tempura Unagi Kabayaki', price:'45 zł', descEN:'grilled eel', descPL:'grillowany węgorz'}
        ]
      },
      {
        id:'oyakomaki',
        title:{en:'Oyakomaki (2 pc)', pl:'Oyakomaki (2 szt.)'},
        img:'images/oyakomaki.jpg',
        desc:{en:'Our specialty rolls, often wrapped in fish or avocado instead of nori.', pl:'Nasze specjalne rolki, często zawijane w rybę lub awokado zamiast nori.'},
        items:[
          {en:'Sake Ebi Tataki', pl:'Sake Ebi Tataki', price:'36 zł', descEN:'chopped shrimp wrapped in salmon', descPL:'siekana krewetka owijana w łososia'},
          {en:'Sake Ikura', pl:'Sake Ikura', price:'42 zł', descEN:'caviar with salmon wrapped in tuna', descPL:'kawior z łososia owijany tuńczykiem'},
          {en:'Maguro Sake Tataki', pl:'Maguro Sake Tataki', price:'45 zł', descEN:'chopped salmon wrapped in tuna', descPL:'siekany łosoś owijany tuńczyком'}
        ]
      },
      {
        id:'sashimi',
        title:{en:'Sashimi (9 pc)', pl:'Sashimi (9 szt.)'},
        img:'images/sashimi.jpg',
        desc:{en:'Thinly sliced raw fish and seafood, served without rice.', pl:'Cienko krojone plastry surowej ryby i owoców morza, podawane bez ryżu.'},
        items:[
          {en:'Mizu', pl:'Mizu', price:'95 zł', descEN:'slices of raw fish — salmon, tuna, butterfish', descPL:'plastry surowej ryby — łosoś, tuńczyk, maślana'}
        ]
      }
    ];

    let LANG = 'pl';

    function setLang(l) {
      if(LANG===l) return;
      LANG = l;
      document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.innerText.toLowerCase() === l));
      
      const content = document.querySelector('.left');
      content.style.opacity = '0';
      setTimeout(() => {
        render();
        content.style.opacity = '1';
      }, 300);
    }

    function renderItem(i) {
        return `
        <div class="item">
            <div class="item-info">
                <div class="item-name">${LANG==='en'?i.en:i.pl}</div>
                <div class="item-desc">${LANG==='en'?i.descEN:i.descPL}</div>
            </div>
            <div class="item-price">${i.price}</div>
        </div>
        `;
    }

    function render() {
      // Texts
      document.getElementById('sub').innerText = LANG==='en' ? 'Fine sushi — Menu' : 'Wyborne sushi — Menu';
      document.getElementById('lbl-contacts').innerText = LANG==='en' ? 'Contacts' : 'Kontakt';
      document.getElementById('lbl-web').innerText = LANG==='en' ? 'Menu — open web version' : 'Menu — wersja online';

      // Update Info Modal Content
      document.getElementById('info-title').innerText = LANG==='en'?ALLERGIES.title.en:ALLERGIES.title.pl;
      document.getElementById('info-text').innerText = LANG==='en'?ALLERGIES.text.en:ALLERGIES.text.pl;
      document.getElementById('info-note').innerText = LANG==='en'?ALLERGIES.service.en:ALLERGIES.service.pl;

      // Nav
      const nav = document.getElementById('nav-container');
      nav.innerHTML = DATA.map(s => `
        <button class="nav-chip" onclick="document.getElementById('${s.id}').scrollIntoView({behavior:'smooth'})">
          ${LANG==='en'?s.title.en:s.title.pl}
        </button>
      `).join('');

      // Menu
      const container = document.getElementById('menu-container');
      const menuHTML = DATA.map(section => {
        const title = LANG==='en'?section.title.en:section.title.pl;
        const desc = LANG==='en'?section.desc.en:section.desc.pl;
        
        // Image logic
        let mediaHtml = '';
        if(section.gallery) {
            mediaHtml = `<div class="stack-grid">
                ${section.gallery.map(g=> `<img src="${g.src}" class="stack-img" onclick="openLb('${g.src}')">`).join('')}
            </div>`;
        } else if(section.img) {
            mediaHtml = `<img src="${section.img}" class="single-img" onclick="openLb('${section.img}')">`;
        }

        // Note logic
        const noteHtml = section.note ? `<div class="note">${LANG==='en'?section.note.en:section.note.pl}</div>` : '';

        // Items Logic (Split or Normal)
        let itemsHtml = '';
        if(section.isSplit) {
            itemsHtml = `
            <div class="cols-2">
                <div>
                    <div class="col-title">Uramaki</div>
                    ${section.itemsLeft.map(renderItem).join('')}
                </div>
                <div>
                    <div class="col-title">${LANG==='en'?'Tempura':'W Tempurze'}</div>
                    ${section.itemsRight.map(renderItem).join('')}
                </div>
            </div>`;
        } else {
            itemsHtml = section.items.map(renderItem).join('');
        }

        const btnText = LANG==='en'?'View items':'Pokaż pozycje';

        return `
        <div class="menu-block" id="${section.id}">
            <div class="block-header"><h2>${title}</h2></div>
            <div class="intro-media">${mediaHtml}</div>
            <div class="intro-text">${desc}</div>
            ${noteHtml}
            
            <div class="accordion-wrapper" onclick="toggleAcc(this)">
                <button class="accordion-trigger">
                    <span class="trigger-text">${btnText}</span>
                    <span class="trigger-icon">▼</span>
                </button>
                <div class="accordion-content">
                    <div class="min-h-0">
                        <div class="items-list">
                            ${itemsHtml}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        `;
      }).join('');

      // Add static allergy block at the bottom
      const allergyHTML = `
        <div class="menu-block" style="border:none; box-shadow:none; background:transparent;">
            <div class="block-header" style="padding-bottom:10px; padding-left:0;">
                <h2 style="font-size:18px; color:var(--muted);">${LANG==='en'?ALLERGIES.title.en:ALLERGIES.title.pl}</h2>
            </div>
            <div style="font-size:13px; color:var(--muted); line-height:1.6; background:#fff; padding:20px; border-radius:16px; border:1px solid rgba(0,0,0,0.04);">
                ${LANG==='en'?ALLERGIES.text.en:ALLERGIES.text.pl}
                <div style="margin-top:16px; font-style:italic; padding-top:16px; border-top:1px dashed #eee;">
                    ${LANG==='en'?ALLERGIES.service.en:ALLERGIES.service.pl}
                </div>
            </div>
        </div>
      `;

      container.innerHTML = menuHTML + allergyHTML;

      // Contacts
      document.getElementById('contacts-list').innerHTML = `
        <a href="tel:+48502525544" class="c-btn">
            <img src="images/phone.png"> <span>+48 502 525 544</span>
        </a> 
        <a href="https://www.instagram.com/ksiestwosushi?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" class="c-btn">
            <img src="images/instagram.png"> <span>@ksiestwosushi</span>
        </a>
        <a href="https://maps.app.goo.gl/ZT1PfgScLAJkTbhx7" target="_blank" class="c-btn">
            <img src="images/google_maps.png"> <span>Krupówki 38A</span>
        </a>
      `;
    }

    // --- ACCORDION LOGIC ---
    function toggleAcc(el) {
        el.classList.toggle('active');
    }

    // --- INFO MODAL ---
    function openInfo() {
        document.getElementById('info-modal').classList.add('open');
        // Make button one-time use (hide it)
        const btn = document.querySelector('.allergy-btn');
        if(btn) {
            btn.style.opacity = '0';
            btn.style.pointerEvents = 'none';
        }
    }
    function closeInfo(e) {
        if (e.target.id === 'info-modal' || e.target.classList.contains('info-close')) {
             document.getElementById('info-modal').classList.remove('open');
        }
    }

    // --- LIGHTBOX ---
    function openLb(src) {
        document.getElementById('lb-img').src = src;
        document.getElementById('lb').classList.add('open');
    }
    function closeLb() {
        document.getElementById('lb').classList.remove('open');
    }

    // INIT
    render();

  </script>
</body>
</html>
